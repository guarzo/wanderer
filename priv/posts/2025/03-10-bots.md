%{
  title: "How to Create a Wanderer Notification Bot",
  author: "Wanderer Team",
  cover_image_uri: "/images/news/03-10-bots/robot.jpg",
  tags: ~w(api bots),
  description: "Learn how to build a bot that uses the wanderer api"
}

---

# How to Create a Wanderer Notification Bot

In this post, we will show you how to build a simple bot using Elixir that polls the Wanderer API once per minute and sends notifications for any new visible systems. This starter project is perfect for developers who want to add their own bot or extend the functionality.

## Introduction

The Wanderer API offers a comprehensive suite of endpoints that allow you to interact with map data, character information, and more. For this bot, we focus on a single feature: detecting new systems that become visible on your map.

With this bot, you will be able to:

- **Poll the API:** The bot will fetch the list of systems every minute.
- **Detect Changes:** It will compare the new list of systems with the previously seen ones.
- **Send Notifications:** If any new systems are found, the bot will log a notification (which you can later extend to send emails, Slack messages, etc.).

## Getting Started

The source code for this project is available on GitHub: [wanderer-bot-starter](https://github.com/guarzo/wanderer-bot-starter.git).

### Prerequisites

- **Elixir** (>= 1.12)
- **Erlang/OTP** (compatible version)
- [Finch](https://github.com/sneako/finch) for HTTP requests
- [Jason](https://github.com/michalmuskala/jason) for JSON parsing

### Steps to Get Started

1. **Clone the Repository:**

   `git clone https://github.com/guarzo/wanderer-bot-starter.git`  
   `cd wanderer-bot-starter`

2. **Set Up Environment Variables:**

   Create a `.env` file or export the required environment variables in your shell:

   ```bash
   export WANDERER_API_TOKEN=your_api_token_here
   export WANDERER_MAP_SLUG=your_map_slug_here
   ```

3. **Fetch Dependencies:**

   `mix deps.get`

4. **Compile the Project:**

   `mix compile`

5. **Run the Bot:**

   Run the bot in interactive mode:

   `iex -S mix`

   Or run without IEx:

   `mix run --no-halt`

The bot will now start polling the Wanderer API and log notifications when new visible systems are detected.

## How It Works

1. **Polling:**  
   The bot uses a GenServer (`WandererBotStarter.Poller`) that sends an HTTP GET request to:
   
   ```
   GET /api/map/systems?slug=<map_slug>
   ```
   
   The request includes a bearer token for authentication.

2. **Filtering:**  
   The bot parses the JSON response to extract the list of visible systems. It uses a `MapSet` to track which systems have been seen.

3. **New System Detection:**  
   The bot compares the current system IDs with those stored from previous polls. If it finds any new IDs, it triggers a notification.

4. **Notification:**  
   Currently, the bot logs a message for each new system. You can extend the `notify/1` function to send emails, post to Slack, or integrate with any notification service.

## Extending the Bot

- **Custom Notifications:**  
  Modify the `notify/1` function in `lib/wanderer_bot_starter/poller.ex` to change how notifications are delivered.

- **Configuration:**  
  You can adjust the polling interval by changing the delay in `Process.send_after(self(), :poll, 60_000)`.

- **Multiple Maps:**  
  To monitor multiple maps, simply start additional Poller processes with different API tokens and map slugs under the supervision tree.

## Conclusion

This guide has shown you how to create a lightweight Wanderer Notification Bot using Elixir. With the repository as a starting point, you can extend the bot to suit your needs and integrate additional features from the Wanderer API.

For the complete source code and further details, visit the [wanderer-bot-starter repository](https://github.com/guarzo/wanderer-bot-starter.git).

Happy coding and may your systems always be visible!

---

Fly safe,  
**WANDERER TEAM**
